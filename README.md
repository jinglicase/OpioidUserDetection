			Detection of Opioid Addicts via Attention-based Bidirectional Recurrent Neural Network

Quick Start

	1. Ensure your Python version is above 3.0, Tensorflow (2.2.0), Keras (2.3.1).
	
	2. Creat a file folder named "embedding_glove".
	
	3. Download “glove.6B.zip” from website https://nlp.stanford.edu/projects/glove/. Extract this file in the folder “embedding_glove”.
	
	4. The main file is "biWordEmbeddingModify.py". You can modify hyperparameters, including max_length, embeddingDim, variantName, in the main function. Specifically, embeddingDim can be chosen as 50, 100, 200, 300. VariantName can be from "variant1" to "variant6", which is corresponding to the six model variants in my paper. max_length was chosen as 100 in my paper.
	
	5. The comparing methods are implemented in the file "comparisonBi.py".

How to get the results in our paper?

    1. Table 1: Run slangOccupatioin.py to get the result.

    2. Table 2: Run biWordEmbeddingModify.py and modify hyperparameters to get the results of the first six models (e.g. Att-BLSTM_M1). Run comparisonBi.py to get the results of the last five models (e.g. Logistic Regression).

    3. Table 3: The keywords are generated based on the attention matrix. The attention matrix is generated as the parameter "att_pred" in the getResult method in biWordEmbeddingModify.py.

    4. Figure 2: Run drawSentenceLength.py to get the result.

    5. Figure 3: Uncomment the code below "# plot the figure of loss with preset learning rate" in the getResult method in biWordEmbeddingModify.py. Then run biWordEmbeddingModify.py.

    6. Figure 4: Run drawDimension.py to get the result. The F1-scores of these six models are generated by running biWordEmbeddingModify.py and modifying hyperparameters.

    7. Figure 5: Run drawWordCloud.py to get the result. The list "imp_list" can be get as the result "OrderedDict" which is generated by running biWordEmbeddingModify.py.

How to run the code on your own data?

    You can generate your own data as a CSV file. The column names are "student1", "student2", "consensus", "userID", "keywords" and "content".
    "student1" represents judgement of the first student. "0" represents that the student did not consider the author of this post as drug user while "1" represents that the student considered the author of this post as drug user.
    "student2" is as same as "student1" except it is from the second student.
    "consensus" represents the final judgement of "student1" and "student2". if they can not get consensus, the third student would make the final judgement.
    "userID" represents the ID of the user of this post.
    "keywords" represents the words appeared both in the posts and the paper "Drug Slang Code Words". The ormat of "keywords" is like "opiate^opiates^china". The keywords are joined together using "^".
    "content" represents the content of the posts.
    
    After generating the CSV file, put this file into the "dataset1000" folder. Meanwhile, "bidataOpiumStreet1020.csv" in each code should be replaced by the name you give for your own file.
